## 简介

bs-cli 是一个快速生成 bs 实例项目的生成器。将 bs-cli 安装在全局环境下，提供了终端里的 `bs`命令。

## 安装

```
  npm install -g bs-cli
```

## 命令

### bs publish

1. 功能：批量打包发布 npm package
2. 参数：
   - `publish` [option]:提供打包路径，支持绝对及相对路径
   - `--first` [option]:制定包加入打包发布第一队列，通常添加被其他包依赖并无相互依赖的包，其他包被加入第二打包队列
   - `--master` [option]:不会加入打包队列，在所有队列打包发布完毕后会执行打包命令
   - `--except` [option]:不会加入打包队列，整个过程被过滤
   - `--git-pull-parameter` [option]:添加到`git pull`尾部，拼接更新命令
   - `--no-git`:跳过仓库更新操作，直接打包更新
   - `--full-install`:清空依赖包的 node_modules，重新安装而不是更新它，无此标识则进行更新 node_modules 操作
3. 日志输出：默认输出到`publish`后的路径下`npm-debug.log`，暂不支持更改与指定

### bs patch

1. 功能：检测当前文件夹 package.json 版本号，获取当前 npm 源对应依赖的最新版本号并修改更新，并执行`npm version --no-git-tag-version patch`
2. 参数：无/`{path}` 指定 bs patch 执行目录为当前路径/`{path}`

### bs batch

1. 功能：检测当前文件夹 src 目录处理 alias,输出目录到`{执行路径}/dist`
2. 参数：
   - `--cmd` [option]:批量执行命令
   - `--except` [option]:过滤文件夹

### bs subBuild

1. 功能：读取`{执行路径}`下的文件夹，执行命令
2. 参数：无/`{path}` 指定 bs subBuild 执行目录为当前路径/`{path}`

## 版本记录

| 版本号 | 修改内容                                                                                                                                          | 发布人 |
| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| 0.1.0  | 初始化                                                                                                                                            | Richie |
| 0.1.1  | 添加 git pull 操作                                                                                                                                | Richie |
| 0.1.2  | 添加日志地址展示                                                                                                                                  | Richie |
| 0.1.3  | 添加 publish parameter 校验                                                                                                                       | Richie |
| 0.1.4  | 添加 master 概念，不加入并行打包队列，末尾打包,添加"--no-git"                                                                                     | Richie |
| 0.1.5  | fix no-git bug,修改输出文案                                                                                                                       | Richie |
| 0.1.6  | 添加 quene，"--first" 代表第一运行队列                                                                                                            | Richie |
| 0.1.7  | fix master 改为非必填，添加 bs patch 功能                                                                                                         | Richie |
| 0.1.8  | 打包末尾重置该 git 仓库                                                                                                                           | Richie |
| 0.1.9  | 添加重置仓库记录打印                                                                                                                              | Richie |
| 0.1.10 | output bs-cli version at begin                                                                                                                    | Richie |
| 0.1.11 | logger.err 后清空文件操作记录，防止下次打包出错                                                                                                   | Richie |
| 0.1.12 | 设置安装模式，(默认)(对依赖执行 npm install && npm update，不清空 node_modules),可选"--full-install"(清空 node_modules 后对依赖执行 npm install)  | Richie |
| 0.1.13 | 添加队列序号输出，去除 JSON 扁平处理，若需要请使用[Vue-Swift-I18n](https://marketplace.visualstudio.com/items?itemName=RichieChoo.vue-swift-i18n) | Richie |
| 0.1.14 | fix publish no parameter bug                                                                                                                      | Richie |
| 0.1.15 | 使用大版本号区分不同分支打包不互相干扰的问题                                                                                                      | Richie |
| 0.1.16 | fix getNewVersion when package not exists in npm registry and some bug                                                                            | Richie |
| 0.1.17 | 添加对子文件夹批量执行命令功能                                                                                                                    | Richie |
| 0.1.18 | 废弃大版本号带来的硬件增加，使用不同分支名来取代版本号                                                                                            | Richie |
| 0.1.19 | 增加 sdm-ui 模块处理 alias，输出 dist 文件功能，增加`bs patch`,`bs subBuild`指定命令执行路径功能，增加错误命令提示功能                            | Richie |
| 0.1.20 | 增加`bs batch`指定命令执行路径功能                                                                                                                | Richie |
| 0.1.21 | 增加`bs subBuild`不生成 dist 选项`--no-dist`                                                                                                      | Richie |
| 0.1.22 | 增加`bs patch` 包不存在时的发布功能,`--implicit-publish` 隐式默认发布                                                                                         | Richie |
| 0.1.23 | fix windows开发环境的alias 处理使用`\`的bug                                                                                         | Richie |
| 0.1.23 | fix 多个`\` 处理的bug                                                                                         | Richie |

## License MIT
